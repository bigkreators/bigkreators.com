{% extends "base.html" %}

{% block title %}{{ article.title }} - Kryptopedia{% endblock %}

{% block sidebar_extra %}
<h3>Article Tools</h3>
<ul>
    <li><a href="/articles/{{ article.slug }}/edit" id="edit-article">Edit Article</a></li>
    <li><a href="/articles/{{ article.slug }}/history" id="article-history">History</a></li>
    <li><a href="/articles/{{ article.slug }}/propose" id="propose-edit">Propose Edit</a></li>
    <li><a href="/articles/{{ article.slug }}/reward" id="reward-article">Reward Contributor</a></li>
</ul>
{% endblock %}

{% block content %}
<div class="article-header">
    <h1>{{ article.title }}</h1>
    <div class="article-meta">
        <span>Views: {{ article.views }}</span>
        <span>Last updated: {{ article.lastUpdatedAt or article.createdAt }}</span>
    </div>
</div>

{% if article.categories %}
<div class="article-categories">
    Categories:
    {% for category in article.categories %}
    <a href="/articles?category={{ category }}" class="category-tag">{{ category }}</a>
    {% endfor %}
</div>
{% endif %}

<div class="article-content">
    {{ article.content|safe }}
</div>

{% if article.tags %}
<div class="article-tags">
    Tags:
    {% for tag in article.tags %}
    <a href="/articles?tag={{ tag }}" class="tag">{{ tag }}</a>
    {% endfor %}
</div>
{% endif %}

<div class="article-footer">
    <div class="article-actions">
        <button id="reward-button" class="action-button">Reward Author</button>
        <button id="share-button" class="action-button">Share</button>
    </div>
</div>
{% endblock %}

{% block modals %}
<!-- Reward Modal -->
<div id="reward-modal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Reward Contributor</h2>
        <p>Show appreciation for this content by rewarding the contributor.</p>
        <form id="reward-form">
            <input type="hidden" id="article-id" value="{{ article._id }}">
            <div class="form-group">
                <label for="reward-type">Reward Type:</label>
                <select id="reward-type" name="rewardType">
                    <option value="helpful">Helpful</option>
                    <option value="insightful">Insightful</option>
                    <option value="comprehensive">Comprehensive</option>
                </select>
            </div>
            <div class="form-group">
                <label for="points">Points:</label>
                <input type="number" id="points" name="points" min="1" max="10" value="5">
            </div>
            <button type="submit">Give Reward</button>
        </form>
    </div>
</div>
{% endblock %}
