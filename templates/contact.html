<!-- File: templates/contact.html -->
{% extends "base.html" %}

{% block title %}Contact Us - Kryptopedia{% endblock %}

{% set active_page = 'contact' %}

{% block extra_css %}
<style>
    .contact-container {
        max-width: 800px;
        margin: 0 auto;
    }
    
    .contact-header {
        text-align: center;
        margin-bottom: 30px;
    }
    
    .contact-header h1 {
        margin-bottom: 15px;
    }
    
    .contact-header p {
        color: #666;
        font-size: 1.1em;
        line-height: 1.6;
    }
    
    .contact-section {
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        padding: 30px;
        margin-bottom: 30px;
    }
    
    .contact-methods {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        margin-bottom: 30px;
    }
    
    .contact-method {
        flex: 1 1 250px;
        padding: 20px;
        background-color: #f8f9fa;
        border-radius: 8px;
        text-align: center;
    }
    
    .contact-method-icon {
        font-size: 32px;
        margin-bottom: 15px;
        color: #0645ad;
    }
    
    .contact-method h3 {
        margin-bottom: 10px;
        color: #333;
    }
    
    .contact-method p {
        color: #666;
        margin-bottom: 15px;
    }
    
    .contact-method-link {
        display: inline-block;
        padding: 8px 16px;
        background-color: #0645ad;
        color: white;
        text-decoration: none;
        border-radius: 4px;
        font-size: 14px;
    }
    
    .contact-method-link:hover {
        background-color: #053a7a;
    }
    
    .contact-form {
        margin-top: 30px;
    }
    
    .form-group {
        margin-bottom: 20px;
    }
    
    .form-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: 500;
    }
    
    .form-group input,
    .form-group select,
    .form-group textarea {
        width: 100%;
        padding: 10px 12px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 16px;
    }
    
    .form-group textarea {
        min-height: 150px;
        resize: vertical;
    }
    
    .form-actions {
        margin-top: 30px;
    }
    
    .submit-button {
        padding: 10px 24px;
        background-color: #0645ad;
        color: white;
        border: none;
        border-radius: 4px;
        font-size: 16px;
        cursor: pointer;
    }
    
    .submit-button:hover {
        background-color: #053a7a;
    }
    
    .status-message {
        padding: 15px;
        border-radius: 4px;
        margin: 15px 0;
        display: none;
    }
    
    .error-message {
        background-color: #f8d7da;
        border: 1px solid #f5c6cb;
        color: #721c24;
    }
    
    .success-message {
        background-color: #d4edda;
        border: 1px solid #c3e6cb;
        color: #155724;
    }
    
    .additional-info {
        margin-top: 40px;
    }
    
    .additional-info h2 {
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 1px solid #eee;
    }
    
    .faq-item {
        margin-bottom: 20px;
    }
    
    .faq-question {
        font-weight: 600;
        color: #333;
        margin-bottom: 10px;
    }
    
    .faq-answer {
        color: #555;
        line-height: 1.6;
    }
    
    @media (max-width: 768px) {
        .contact-methods {
            flex-direction: column;
        }
    }
</style>
{% endblock %}

{% block sidebar_extra %}
<h3>Navigation</h3>
<ul>
    <li><a href="/">Home</a></li>
    <li><a href="/about">About Us</a></li>
    <li><a href="/help">Help Center</a></li>
</ul>

<h3>Quick Links</h3>
<ul>
    <li><a href="#contact-form">Contact Form</a></li>
    <li><a href="#faq">Frequently Asked Questions</a></li>
    <li><a href="/community">Community Portal</a></li>
</ul>
{% endblock %}

{% block content %}
<div class="contact-container">
    <div class="contact-header">
        <h1>Contact Us</h1>
        <p>Have questions, suggestions, or need help? We're here for you. Choose the method that works best for you to get in touch with our team.</p>
    </div>
    
    <div class="contact-section">
        <div class="contact-methods">
            <div class="contact-method">
                <div class="contact-method-icon">‚úâÔ∏è</div>
                <h3>Email Us</h3>
                <p>For general inquiries, feedback, or suggestions.</p>
                <a href="mailto:support@kryptopedia.org" class="contact-method-link">support@kryptopedia.org</a>
            </div>
            
            <div class="contact-method">
                <div class="contact-method-icon">üõü</div>
                <h3>Help Center</h3>
                <p>Explore our comprehensive help docs and resources.</p>
                <a href="/help" class="contact-method-link">Visit Help Center</a>
            </div>
            
            <div class="contact-method">
                <div class="contact-method-icon">üí¨</div>
                <h3>Community</h3>
                <p>Connect with other users and contributors.</p>
                <a href="/community" class="contact-method-link">Join Community</a>
            </div>
        </div>
        
        <div id="contact-form" class="contact-form">
            <h2>Send Us a Message</h2>
            
            <div id="error-message" class="status-message error-message"></div>
            <div id="success-message" class="status-message success-message"></div>
            
            <form id="contact-us-form">
                <div class="form-group">
                    <label for="name">Your Name</label>
                    <input type="text" id="name" name="name" required>
                </div>
                
                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" name="email" required>
                </div>
                
                <div class="form-group">
                    <label for="subject">Subject</label>
                    <select id="subject" name="subject" required>
                        <option value="">Select a subject...</option>
                        <option value="general">General Inquiry</option>
                        <option value="content">Content Issue or Suggestion</option>
                        <option value="technical">Technical Problem</option>
                        <option value="account">Account Assistance</option>
                        <option value="partnership">Partnership or Collaboration</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="message">Your Message</label>
                    <textarea id="message" name="message" required></textarea>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="submit-button">Send Message</button>
                </div>
            </form>
        </div>
    </div>
    
    <div id="faq" class="contact-section additional-info">
        <h2>Frequently Asked Questions</h2>
        
        <div class="faq-list">
            <div class="faq-item">
                <div class="faq-question">How can I contribute to Kryptopedia?</div>
                <div class="faq-answer">
                    You can contribute by creating new articles, improving existing content, or reviewing edit proposals. 
                    Just create an account and start contributing! Check out our <a href="/contribute">Contribution Guide</a> for more details.
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">How do I report inaccurate information?</div>
                <div class="faq-answer">
                    If you find inaccurate information, you can either edit the article directly or submit an edit proposal. 
                    For serious issues, please use the contact form above with the subject "Content Issue."
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">I forgot my password. How do I reset it?</div>
                <div class="faq-answer">
                    You can reset your password by clicking the "Forgot Password" link on the login page. 
                    You'll receive an email with instructions to create a new password.
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">How can I become an editor or administrator?</div>
                <div class="faq-answer">
                    Editor and administrator roles are granted to active contributors who demonstrate consistent high-quality contributions.
                    Continue contributing valuable content, and our team will notice your efforts.
                </div>
            </div>
            
            <div class="faq-item">
                <div class="faq-question">Can I use Kryptopedia content in my own work?</div>
                <div class="faq-answer">
                    Kryptopedia content is available under our content license, which typically allows reuse with proper attribution.
                    Please see our <a href="/terms">Terms of Use</a> for specific details on content licensing.
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const contactForm = document.getElementById('contact-us-form');
    const errorMessage = document.getElementById('error-message');
    const successMessage = document.getElementById('success-message');
    
    if (contactForm) {
        contactForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Get form values
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const subject = document.getElementById('subject').value;
            const message = document.getElementById('message').value;
            
            // Simple validation
            if (!name || !email || !subject || !message) {
                showMessage(errorMessage, 'Please fill in all fields');
                return;
            }
            
            // Check for valid email
            if (!isValidEmail(email)) {
                showMessage(errorMessage, 'Please enter a valid email address');
                return;
            }
            
            // Create contact data
            const contactData = {
                name: name,
                email: email,
                subject: subject,
                message: message
            };
            
            // Get token if logged in (optional)
            const token = localStorage.getItem('token');
            
            // Show loading state
            const submitButton = contactForm.querySelector('.submit-button');
            const originalText = submitButton.textContent;
            submitButton.disabled = true;
            submitButton.textContent = 'Sending...';
            
            // Since this is a template, we'll simulate a successful submission
            // In a real implementation, you would send this data to an API endpoint
            
            // Simulate API request with timeout
            setTimeout(() => {
                // Show success message
                showMessage(successMessage, 'Your message has been sent successfully! We\'ll get back to you as soon as possible.');
                
                // Reset form
                contactForm.reset();
                
                // Reset button state
                submitButton.disabled = false;
                submitButton.textContent = originalText;
            }, 1500);
            
            /* 
            // Example of actual API call (commented out)
            fetch('/api/contact', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': token ? `Bearer ${token}` : ''
                },
                body: JSON.stringify(contactData)
            })
            .then(response => {
                if (!response.ok) {
                    return response.json().then(data => {
                        throw new Error(data.detail || 'Failed to send message');
                    });
                }
                return response.json();
            })
            .then(data => {
                showMessage(successMessage, 'Your message has been sent successfully! We\'ll get back to you as soon as possible.');
                contactForm.reset();
            })
            .catch(error => {
                console.error('Error sending message:', error);
                showMessage(errorMessage, error.message || 'Failed to send message. Please try again.');
            })
            .finally(() => {
                submitButton.disabled = false;
                submitButton.textContent = originalText;
            });
            */
        });
    }
    
    // Helper function to validate email
    function isValidEmail(email) {
        const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
        return emailRegex.test(email);
    }
    
    // Helper function to show message
    function showMessage(element, message) {
        element.textContent = message;
        element.style.display = 'block';
        
        // Scroll to message
        element.scrollIntoView({ behavior: 'smooth', block: 'start' });
        
        // Hide after 5 seconds if it's a success message
        if (element === successMessage) {
            setTimeout(() => {
                element.style.display = 'none';
            }, 5000);
        }
    }
    
    // Smooth scroll for anchor links
    const anchorLinks = document.querySelectorAll('a[href^="#"]');
    
    anchorLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            
            const targetId = this.getAttribute('href').substring(1);
            const targetElement = document.getElementById(targetId);
            
            if (targetElement) {
                window.scrollTo({
                    top: targetElement.offsetTop - 50,
                    behavior: 'smooth'
                });
            }
        });
    });
});
</script>
{% endblock %}
