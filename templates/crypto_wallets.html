<!-- File: templates/crypto_wallets.html -->
{% extends "base.html" %}
{% block title %}Wallet Management - Kryptopedia{% endblock %}
{% set active_page = 'admin' %}

{% block content %}
<div class="container" style="max-width: 1200px; margin: 0 auto; padding: 20px;">
    <h1>üëõ Wallet Management</h1>
    
    <div class="search-bar" style="background: white; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
        <form method="get">
            <input type="text" name="search" placeholder="Search by username or wallet address..." 
                   value="{{ search or '' }}" 
                   style="padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px; width: 300px;">
            <button type="submit" style="padding: 8px 20px; background: #667eea; color: white; border: none; border-radius: 4px; cursor: pointer;">
                Search
            </button>
        </form>
    </div>
    
    <table class="data-table" style="width: 100%; background: white; border-radius: 8px; overflow: hidden;">
        <thead>
            <tr style="background: #f8f9fa;">
                <th style="padding: 12px;">User</th>
                <th style="padding: 12px;">Wallet Address</th>
                <th style="padding: 12px;">SOL Balance</th>
                <th style="padding: 12px;">KONTRIB Balance</th>
                <th style="padding: 12px;">Total Earned</th>
                <th style="padding: 12px;">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
            <tr>
                <td style="padding: 12px;">{{ user.username }}</td>
                <td style="padding: 12px;">
                    <code style="background: #f8f9fa; padding: 2px 6px; border-radius: 3px;">
                        {{ user.wallet_address[:8] }}...{{ user.wallet_address[-6:] }}
                    </code>
                </td>
                <td style="padding: 12px;">{{ "%.4f"|format(user.sol_balance|default(0)) }} SOL</td>
                <td style="padding: 12px;"><strong>{{ user.token_balance|default(0) }}</strong> KONTRIB</td>
                <td style="padding: 12px;">{{ user.total_earned|default(0) }} KONTRIB</td>
                <td style="padding: 12px;">
                    <a href="/api/token/wallet/{{ user.wallet_address }}" target="_blank" 
                       style="color: #667eea;">Details ‚Üí</a>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="6" style="text-align: center; padding: 40px;">No wallets found</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
    {% if total_count > limit %}
    <div class="pagination" style="display: flex; justify-content: center; align-items: center; gap: 20px; margin-top: 30px;">
        {% if skip > 0 %}
        <a href="?skip={{ skip - limit }}&limit={{ limit }}&search={{ search or '' }}"
           style="padding: 8px 16px; background: #667eea; color: white; text-decoration: none; border-radius: 4px;">
            ‚Üê Previous
        </a>
        {% endif %}
        
        <span>{{ users|length }} of {{ total_count }} wallets</span>
        
        {% if skip + limit < total_count %}
        <a href="?skip={{ skip + limit }}&limit={{ limit }}&search={{ search or '' }}"
           style="padding: 8px 16px; background: #667eea; color: white; text-decoration: none; border-radius: 4px;">
            Next ‚Üí
        </a>
        {% endif %}
    </div>
    {% endif %}
</div>
{% endblock %}